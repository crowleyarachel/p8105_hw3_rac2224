p8105\_hw3\_rac2224
================
Rachel Crowley
10/13/2019

## Problem 1

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.2.1.9000 ──

    ## ✔ ggplot2 3.2.1          ✔ purrr   0.3.2     
    ## ✔ tibble  2.1.3          ✔ dplyr   0.8.3     
    ## ✔ tidyr   1.0.0.9000     ✔ stringr 1.4.0     
    ## ✔ readr   1.3.1          ✔ forcats 0.4.0

    ## ── Conflicts ─────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library(ggridges)
```

    ## 
    ## Attaching package: 'ggridges'

    ## The following object is masked from 'package:ggplot2':
    ## 
    ##     scale_discrete_manual

``` r
library(knitr)
library(p8105.datasets)

data("instacart")
```

Describing the Dataset “instacart”

Dataset size and structure

  - The number of observations in the dataset instacart is 1384617. The
    number of columns in the dataset instacart is 15. The variables in
    the dataset instacart are order\_id, product\_id,
    add\_to\_cart\_order, reordered, user\_id, eval\_set, order\_number,
    order\_dow, order\_hour\_of\_day, days\_since\_prior\_order,
    product\_name, aisle\_id, department\_id, aisle, department. The
    dimensions of the dataset instacart are 1384617, 15.
  - The structure of the variables within the dataset instacart are as
    follows: order\_id is an integer, product\_id is an integer,
    add\_to\_cart\_order is an integer, reordered is an integer,
    user\_id is an integer, eval\_set is a character, order\_number is
    an integer, order\_dow is an integer, order\_hour\_of\_day is an
    integer, days\_since\_prior\_order is an integer, product\_name is a
    character, aisle\_id is an integer, department\_id is an integer,
    aisle is a character, and department is a character.

Key variable description

  - The min, max, mean, and median of each of the integer variables are
    as follows: for order\_ID, the minimum is 1, the maximum is 3421070,
    the mean is 1.706297610^{6}, and the median is 1701880; for
    product\_ID, the minimum is 1, the maximum is 49688, the mean is
    2.555623610^{4}, and the median is 25298; for add\_to\_cart\_order,
    the minimum is 1, the maximum is 80, the mean is 8.7580443, and the
    median is 7; for reordered, the minimum is 0, the maximum is 1, the
    mean is 0.5985944, and the median is 1; for user\_id, the minimum is
    1, the maximum is 206209, the mean is 1.031127810^{5}, and the
    median is 102933; for order\_number, the minimum is 4, the maximum
    is 100, the mean is 17.0914101, and the median is 11; for
    order\_dow, the minimum is 0, the maximum is 6, the mean is
    2.7013918, and the median is 3; for order\_hour\_of\_day, the
    minimum is 0, the maximum is 23, the mean is 13.5775922, and the
    median is 14; for days\_since\_prior\_order, the minimum is 0, the
    maximum is 30, the mean is 17.0661259, and the median is 15; for
    aisle\_id, the minimum is 1, the maximum is 134, the mean is
    71.30423, and the median is 83; and for department\_id, the minimum
    is 1, the maximum is 21, the mean is 9.8397774, and the median is 8.
  - The number of missing observations for each variable are as follows:
    for order\_id is 0, for product\_id is 0, for add\_to\_cart\_order
    is 0, for reordered is 0, for user\_id is 0, for eval\_set is 0, for
    order\_number is 0, for order\_dow is 0, for order\_hour\_of\_day is
    0, for days\_since\_prior\_order is 0, for product\_name is 0, for
    aisle\_id is 0, for department\_id is 0, for aisle is 0, and for
    department is 0.

Examples of observations

  - The mean order hour of day for products from the produce department
    is 13.5597245, the mean order hour of day for products from the
    frozen department is 13.8093223, and the mean order hour of day for
    products from the household department is 13.447813. The largest
    number of days since prior order for an order that included
    something from the eggs aisle is 30 and for an order that included
    something from the coffee aisle is 30.

Number of aisles and aisles with most items ordered

``` r
instacart %>%
  count(aisle, n_distinct = n_distinct(aisle))%>%
  arrange(desc(n)) 
```

    ## # A tibble: 134 x 3
    ##    aisle                         n_distinct      n
    ##    <chr>                              <int>  <int>
    ##  1 fresh vegetables                     134 150609
    ##  2 fresh fruits                         134 150473
    ##  3 packaged vegetables fruits           134  78493
    ##  4 yogurt                               134  55240
    ##  5 packaged cheese                      134  41699
    ##  6 water seltzer sparkling water        134  36617
    ##  7 milk                                 134  32644
    ##  8 chips pretzels                       134  31269
    ##  9 soy lactosefree                      134  26240
    ## 10 bread                                134  23635
    ## # … with 124 more rows

  - There 134 unique aisles in the dataset “instacart”. The aisles with
    most items ordered include the “fresh vegetables” aisle with 150609
    orders, “fresh fruits” aisle with 150473 orders, the “packaged
    vegetables fruits” aisle with 78493 orders, the “yogurt” aisle with
    55240 orders, and the “packaged cheese” aisle with 41699 orders.

Plot for number of items ordered in each aisle

``` r
instacart %>%
  count(aisle, n_distinct = n_distinct(aisle))%>%
  arrange(desc(n)) %>%
  filter(n >= 10000) %>%
    mutate(aisle = forcats::fct_reorder(aisle, n)) %>%
  ggplot(aes(x=aisle, y=(n))) + geom_point() + theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +
    labs(
      title = "Number of orders per aisle for aisles with 10,000 orders or more",
      x = "Aisle",
      y = "Number of orders",
      caption = "Data from Instacart"
    )
```

![](p8105_hw3_rac2224_files/figure-gfm/unnamed-chunk-3-1.png)<!-- -->

  - Based on the plot created above, the aisles with most items ordered
    include the “fresh vegetables”, “fresh fruits”, “packaged vegetables
    fruits”, “yogurt” and “packaged cheese” aisles, which supports
    previous conclusions made regarding the aisles with most items
    ordered. Fresh vegetables has the most items ordered, and butter has
    the least items ordered. The number of orders for the majority of
    aisles presented stays below 40,000, until there is a sharp and
    almost exponential increase in the number of orders seen for the
    aisles “fresh vegetables”, “fresh fruits”, “packaged vegetavles
    fruits”, “yogurt” and “packaged cheese”.

Table showing the three most popular items in aisles “baking
ingredients”, “dog food care”, and “packaged vegetables
fruits”

``` r
instacart2 = instacart[which(instacart$aisle=='baking ingredients' | instacart$aisle == 'dog food care'| instacart$aisle == 'packaged vegetables fruits'), 1:15]
instacart3 = instacart[which(instacart$product_name=='Light Brown Sugar' | instacart$product_name=='Pure Baking Soda' | instacart$product_name=='Cane Sugar'| instacart$product_name=='Snack Sticks Chicken & Rice Recipe Dog Treats' | instacart$product_name=='Organix Chicken & Brown Rice Recipe' | instacart$product_name=='Small Dog Biscuits' | instacart$product_name=='Organic Baby Spinach' | instacart$product_name=='Organic Raspberries' | instacart$product_name=='Organic Blueberries'),1:15] 
instacart3 %>%
  group_by(aisle, product_name) %>%
  summarize(
    n_order = n()
  ) %>%
  arrange(desc(n_order)) %>%
  knitr::kable(caption = "Number of orders for top three ordered products in the 'packaged vegetables fruits', 'baking ingredients' and 'dog good care' aisles")
```

| aisle                      | product\_name                                 | n\_order |
| :------------------------- | :-------------------------------------------- | -------: |
| packaged vegetables fruits | Organic Baby Spinach                          |     9784 |
| packaged vegetables fruits | Organic Raspberries                           |     5546 |
| packaged vegetables fruits | Organic Blueberries                           |     4966 |
| baking ingredients         | Light Brown Sugar                             |      499 |
| baking ingredients         | Pure Baking Soda                              |      387 |
| baking ingredients         | Cane Sugar                                    |      336 |
| dog food care              | Snack Sticks Chicken & Rice Recipe Dog Treats |       30 |
| dog food care              | Organix Chicken & Brown Rice Recipe           |       28 |
| dog food care              | Small Dog Biscuits                            |       26 |

Number of orders for top three ordered products in the ‘packaged
vegetables fruits’, ‘baking ingredients’ and ‘dog good care’ aisles

  - The three most popular items in each aisle are as follows: for
    baking ingredients the items are Light Brown Sugar (n=499), Pure
    Baking Soda (n=387), and Cane Sugar (n=336); for dog food care the
    items are Snack Sticks Chicken & Rice Recipe Dog Treats (n=26),
    Organix Chicken & Brown Rice Recipe (n=28), and Small Dog Biscuits
    (n=26); for packaged vegetables fruits the items are Organic Baby
    Spinach (n=9784), Organic Raspberries (n=5546), Organic Blueberries
    (n=4966).

Table showing the mean hour of the day at which Pink Lady Apples and
Coffee Ice Cream are ordered on each day of the
week

``` r
instacart4 = instacart[which(instacart$product_name=='Pink Lady Apples' | instacart$product_name == 'Coffee Ice Cream'), 1:15] %>%
 select(product_name, order_dow, order_hour_of_day)%>%
 group_by(order_dow, product_name) %>%
 summarize(mean_hour= mean(order_hour_of_day)) %>%
  pivot_wider(
    names_from = "order_dow",
    values_from = "mean_hour"
  )
colnames(instacart4)[colnames(instacart4)=="0"] <- "Sunday"
colnames(instacart4)[colnames(instacart4)=="1"] <- "Monday"
colnames(instacart4)[colnames(instacart4)=="2"] <- "Tuesday"
colnames(instacart4)[colnames(instacart4)=="3"] <- "Wednesday"
colnames(instacart4)[colnames(instacart4)=="4"] <- "Thursday"
colnames(instacart4)[colnames(instacart4)=="5"] <- "Friday"
colnames(instacart4)[colnames(instacart4)=="6"] <- "Saturday"
colnames(instacart4)[colnames(instacart4)=="product_name"] <- "Product Name"
instacart4 %>%
knitr::kable(caption = "Mean hour of day for order by product name and day of week" )
```

| Product Name     |   Sunday |   Monday |  Tuesday | Wednesday | Thursday |   Friday | Saturday |
| :--------------- | -------: | -------: | -------: | --------: | -------: | -------: | -------: |
| Coffee Ice Cream | 13.77419 | 14.31579 | 15.38095 |  15.31818 | 15.21739 | 12.26316 | 13.83333 |
| Pink Lady Apples | 13.44118 | 11.36000 | 11.70213 |  14.25000 | 11.55172 | 12.78431 | 11.93750 |

Mean hour of day for order by product name and day of week

  - For pink lady apples, the highest mean hour of day for an order is
    on Wednesday with a mean of 14.25 hours and the lowest mean hour of
    day for an order is on Monday with a mean of 11.36 hours. For coffee
    ice cream, the highest mean hour of day for an order is on Tuesday
    with a mean of 15.38 and the lowest mean hour of day for an order is
    on Friday with a mean of 12.26.

## Problem 2

Data cleaning

``` r
data("brfss_smart2010") 
brfss_smart2010 = janitor::clean_names(brfss_smart2010) 
brfss_smart2010 = brfss_smart2010[which(brfss_smart2010$topic=='Overall Health'| brfss_smart2010$response =='Poor'| brfss_smart2010$response =='Fair'|brfss_smart2010$response =='Good' | brfss_smart2010$response =='Very good' | brfss_smart2010$response =='Excellent'), 1:23]
brfss_smart2010  = 
response <- c("Poor", "Fair", "Good", "Very Good", "Excellent")
response_ordered <- factor(response, ordered = TRUE, 
                                levels = c("Poor", "Fair", "Good", "Very Good", "Excellent"))
```
